<!DOCTYPE html>
<html lang="ja">
<head>
	<meta charset="UTF-8">
	<title>ログイン</title>
	<style>
		body { font-family: Arial, sans-serif; margin: 2rem; background-color: #f0f2f5; }
		.container { max-width: 400px; margin: auto; padding: 20px; background: #fff; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
		h1 { color: #333; }
		input[type="text"], input[type="password"] { width: 100%; padding: 10px; margin-bottom: 10px; border: 1px solid #ccc; border-radius: 4px; }
		button { padding: 10px 15px; border: none; border-radius: 4px; cursor: pointer; color: #fff; background-color: #007bff; }
		.message { margin-top: 10px; }
	</style>
</head>
<body>
	<div class="container">
		<h1>ログイン</h1>
		<form id="login-form">
			<input type="text" id="login-username" placeholder="ユーザー名" required>
			<input type="password" id="login-password" placeholder="パスワード" required>
			<button type="submit">ログイン</button>
		</form>
		<div id="login-message" class="message"></div>
		<div id="auth-status" class="message"></div>
		<a href="signup.html">サインアップはこちら</a>
	</div>
	<script>
		document.getElementById('login-form').addEventListener('submit', function(e) {
			e.preventDefault();
			const username = document.getElementById('login-username').value;
			const password = document.getElementById('login-password').value;
			fetch('/api/v1/users/login', {
				method: 'POST',
				headers: { 'Content-Type': 'application/json' },
				body: JSON.stringify({ username, password })
			})
			.then(res => res.text().then(text => ({ status: res.status, text })))
			.then(result => {
				if (result.status === 200) {
					localStorage.setItem('currentUser', username);
					window.location.href = 'home.html';
				} else {
					document.getElementById('login-message').textContent = 'エラー: ' + result.text;
				}
			})
			.catch(() => {
				document.getElementById('login-message').textContent = '通信エラーが発生しました';
			});
		});
	</script>
</body>
</html>
